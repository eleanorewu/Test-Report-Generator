# Chrome 擴充應用程式建置說明

本專案已配置為支援 Chrome 擴充應用程式模式。

## 建置步驟

### 1. 安裝依賴
```bash
npm install
```

### 2. 建置擴充應用程式
```bash
npm run build:extension
```

### 3. 載入擴充應用程式到 Chrome

1. 打開 Chrome 瀏覽器
2. 前往 `chrome://extensions/`
3. 開啟右上角的「開發人員模式」
4. 點擊「載入未封裝項目」
5. 選擇專案中的 `dist` 資料夾
6. 擴充應用程式應該會出現在列表中

### 4. 使用擴充應用程式

點擊 Chrome 工具列上的擴充應用程式圖示，會打開一個彈出視窗，您可以在其中使用測試報告產生器。

## 文件結構

擴充應用程式建置後，`dist` 資料夾應包含：

```
dist/
├── manifest.json          # Chrome 擴充應用程式配置
├── popup.html             # 彈出視窗 HTML
├── icons/                 # 圖標文件（如果已添加）
├── assets/                # 打包的 JS/CSS 文件
└── src/                   # 源文件（如果未打包）
```

## 圖標設置

請在 `icons/` 資料夾中添加以下圖標文件（可選，但建議添加）：
- `icon16.png` (16x16 像素)
- `icon48.png` (48x48 像素)
- `icon128.png` (128x128 像素)

如果沒有圖標文件，擴充應用程式仍可正常運行，但會使用 Chrome 的預設圖標。

## 功能說明

### Chrome API 整合

- **下載功能**：使用 Chrome Downloads API 下載生成的測試報告圖片
- **儲存權限**：已配置 storage 權限，可用於未來保存用戶設定

### 向後兼容

擴充應用程式模式會自動檢測運行環境：
- 在 Chrome 擴充應用程式中：使用 Chrome API
- 在網頁中：使用傳統的下載方式

## 故障排除

### 擴充應用程式無法載入

1. 確認已執行 `npm run build:extension`
2. 檢查 `dist` 資料夾中是否有 `manifest.json` 和 `popup.html`
3. 在 Chrome 擴充應用程式管理頁面查看錯誤訊息

### 下載功能無法使用

1. 確認擴充應用程式已獲得 `downloads` 權限
2. 檢查瀏覽器控制台的錯誤訊息
3. 如果是在開發模式，確認已啟用開發人員模式

## 開發模式

如需在開發模式下測試擴充應用程式：

1. 執行 `npm run dev`
2. 修改 Vite 配置以輸出到正確的目錄
3. 在 Chrome 中載入開發輸出的資料夾

注意：開發模式下可能需要手動複製 `manifest.json` 到輸出目錄。